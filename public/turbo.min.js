/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/turbojs@1.0.2/turbo.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():e.turbojs=r()}(this,function(){"use strict";var e=function(e){var r,t={alpha:!1,antialias:!1};if(!(r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("turbojs: Unable to initialize WebGL. Your browser may not support it.");return r}(document.createElement("canvas"));if(!e.getExtension("OES_texture_float"))throw new Error("turbojs: Required texture format OES_texture_float not supported.");function r(r,t,a){var n=e.createBuffer();return e.bindBuffer(a||e.ARRAY_BUFFER,n),e.bufferData(a||e.ARRAY_BUFFER,new(t||Float32Array)(r),e.STATIC_DRAW),n}var t=r([-1,-1,1,-1,1,1,-1,1]),a=r([0,0,1,0,1,1,0,1]),n=r([1,2,0,3,0,2],Uint16Array,e.ELEMENT_ARRAY_BUFFER),o="attribute vec2 position;\nvarying vec2 pos;\nattribute vec2 texture;\n\nvoid main(void) {\n  pos = texture;\n  gl_Position = vec4(position.xy, 0.0, 1.0);\n}",i="\nprecision mediump float;\nuniform sampler2D u_texture;\nvarying vec2 pos;\n\nvec4 read(void) {\n  return texture2D(u_texture, pos);\n}\n\nvoid commit(vec4 val) {\n  gl_FragColor = val;\n}\n\n// user code begins here\n\n",E=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(E,o),e.compileShader(E),!e.getShaderParameter(E,e.COMPILE_STATUS))throw new Error("\nturbojs: Could not build internal vertex shader (fatal).\n\nINFO: >REPORT< THIS. That's our fault!\n\n--- CODE DUMP ---\n"+o+"\n\n--- ERROR LOG ---\n"+e.getShaderInfoLog(E));function u(r,t){var a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,t,0,e.RGBA,e.FLOAT,r),e.bindTexture(e.TEXTURE_2D,null),a}return{run:function(r,o){var R=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(R,i+o),e.compileShader(R),!e.getShaderParameter(R,e.COMPILE_STATUS)){for(var T=o.split("\n"),f="ERROR: Could not build shader (fatal).\n\n------------------ KERNEL CODE DUMP ------------------\n",l=0;l<T.length;l++)f+=i.split("\n").length+l+"> "+T[l]+"\n";throw f+="\n--------------------- ERROR  LOG ---------------------\n"+e.getShaderInfoLog(R),new Error(f)}var d=e.createProgram();if(e.attachShader(d,E),e.attachShader(d,R),e.linkProgram(d),!e.getProgramParameter(d,e.LINK_STATUS))throw new Error("turbojs: Failed to link GLSL program code.");var A=e.getUniformLocation(d,"u_texture"),s=e.getAttribLocation(d,"position"),c=e.getAttribLocation(d,"texture");e.useProgram(d);var _=Math.sqrt(r.data.length)/4,b=u(r.data,_);e.viewport(0,0,_,_),e.bindFramebuffer(e.FRAMEBUFFER,e.createFramebuffer());var m=u(new Float32Array(r.data.length),_);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m,0);var h=e.checkFramebufferStatus(e.FRAMEBUFFER)==e.FRAMEBUFFER_COMPLETE;if(!h)throw new Error("turbojs: Error attaching float texture to framebuffer. Your device is probably incompatible. Error info: "+h.message);return e.bindTexture(e.TEXTURE_2D,b),e.activeTexture(e.TEXTURE0),e.uniform1i(A,0),e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,t),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0),e.readPixels(0,0,_,_,e.RGBA,e.FLOAT,r.data),r.data.subarray(0,r.length)},alloc:function(e){if(e>16777216)throw new Error("turbojs: Whoops, the maximum array size is exceeded!");var r=Math.pow(Math.pow(2,Math.ceil(Math.log(e)/1.386)-1),2);return{data:new Float32Array(16*r),length:e}}}});
//# sourceMappingURL=/sm/203eabc755f67684e375764d8c60753e3e7dbbe7625cfe80727769c70102715a.map